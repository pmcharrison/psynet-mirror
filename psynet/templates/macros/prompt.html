{% macro simple(config) %}
    {% if config.text is not none %}
        <div style="margin-top:15px; margin-bottom: 15px;">
            {{ config.text }}
        </div>
    {% endif %}

    {% if config.ready_for_response %}
        <script>
            psynet.media.register_on_loaded_routine(psynet.response.ready);
        </script>
    {% endif %}
{% endmacro %}

{% macro audio(config) %}
    {{ simple(config) }}

    <script>
        psynet.media.register_on_loaded_routine(function() {
            var sound = psynet.audio.prompt.play({
                loop: {{ config.loop | lower }}
            });

            sound.onended = psynet.response.ready;

            {% if config.enable_response_after is not none %}
                setTimeout(psynet.response.ready, 1000 * {{ config.enable_response_after }});
            {% endif %}
        })
    </script>
{% endmacro %}
